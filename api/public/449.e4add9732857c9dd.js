"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[449],{1449:(S,m,s)=>{s.r(m),s.d(m,{DirectionModule:()=>D});var l=s(6895),u=s(5450),t=s(8256),d=s(4351),a=s(8505),h=s(529);let p=(()=>{class o{constructor(e){this.http=e,this.countries=[],this.states=[],this.cities=[],this.base_url="https://www.universal-tutorial.com/api",this.token="",this.getCountries().subscribe()}getCountries(){return this.http.get(`${this.base_url}/getaccesstoken`,{headers:{"api-token":"JlgEGcCRj12-xcLJvpFSbMa-8lYOA4n0OgWGVWcDxu0xUY52PPdiRstpTG6Tjls8QIM","user-email":"marcoasto@gmail.com"}}).pipe((0,d.b)(e=>(this.token=`Bearer ${e.auth_token}`,this.http.get(`${this.base_url}/countries`,{headers:{Authorization:`Bearer ${e.auth_token}`}}))),(0,a.b)(e=>{this.countries=e}))}getStatesFromCountry(e){return this.http.get(`${this.base_url}/states/${e}`,{headers:{Authorization:this.token}}).pipe((0,a.b)(r=>{this.states=r}))}getCitiesFromState(e){return this.http.get(`${this.base_url}/cities/${e}`,{headers:{Authorization:this.token}}).pipe((0,a.b)(r=>{this.cities=r}))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(h.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var i=s(433),g=s(6278);function f(o,n){if(1&o&&(t.TgZ(0,"option",18),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.country_name),t.xp6(1),t.hij("",e.country_name," ")}}function v(o,n){if(1&o&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.state_name),t.xp6(1),t.Oqu(e.state_name)}}function C(o,n){if(1&o&&(t.TgZ(0,"option"),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.city_name)}}let y=(()=>{class o{constructor(e,r,c){this.directionService=e,this.fb=r,this.router=c,this.countries=[],this.formComplete=new t.vpe,this.formDirection=this.fb.group({country:["",[i.kI.required,i.kI.minLength(1)]],state:["",[i.kI.required,i.kI.minLength(1)]],city:["",[i.kI.required,i.kI.minLength(1)]],address1:["",[i.kI.required]],address2:["",[i.kI.required]]})}get states(){return this.directionService.states}get cities(){return this.directionService.cities}getStatesFromName(e){!e||this.directionService.getStatesFromCountry(e).subscribe()}getCitiesFromName(e){!e||this.directionService.getCitiesFromState(e).subscribe()}sendForm(){this.formDirection.invalid||this.formComplete.emit(this.formDirection.value)}ngOnInit(){const e=this.formDirection.get("country")?.valueChanges;this.changeCountry=e.subscribe(c=>{this.getStatesFromName(c)});const r=this.formDirection.get("state")?.valueChanges;this.changeState=r.subscribe(c=>{this.getCitiesFromName(c)})}ngOnDestroy(){this.changeCountry.unsubscribe(),this.changeState.unsubscribe()}navigteToPayment(){setTimeout(()=>{this.router.navigate(["/checkout/payment"])},200)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p),t.Y36(i.qu),t.Y36(u.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-direction"]],inputs:{countries:"countries"},outputs:{formComplete:"onFormCompleted"},decls:36,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","state_id",1,"control-label"],["formControlName","country","name","country",1,"form-control"],["value","","selected","selected"],["ng-selected","",3,"value",4,"ngFor","ngForOf"],["formControlName","state","name","sel2",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["formControlName","city","id","state_id",1,"form-control"],[4,"ngFor","ngForOf"],["for","street1_id",1,"control-label"],["formControlName","address1","type","text","id","street1_id","name","street1","placeholder","Street address, P.O. box, company name, c/o",1,"form-control"],["for","street2_id",1,"control-label"],["formControlName","address2","type","text","id","street2_id","name","street2","placeholder","Apartment, suite, unit, building, floor, etc.",1,"form-control"],[1,"row","g-0","align-items-center","pb-4"],[1,"col-sm-6"],[1,"float-sm-end"],["routerLink","/checkout/direction",1,"btn","btn-primary",3,"click"],["ng-selected","",3,"value"],[3,"value"]],template:function(e,r){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return r.sendForm()}),t.TgZ(1,"div",1)(2,"label",2),t._uU(3,"Select your Country"),t.qZA(),t.TgZ(4,"select",3)(5,"option",4),t._uU(6,"---- Please select your Country ----"),t.qZA(),t.YNc(7,f,2,2,"option",5),t.qZA()(),t.TgZ(8,"div",1)(9,"label",2),t._uU(10,"Select your State"),t.qZA(),t.TgZ(11,"select",6)(12,"option",4),t._uU(13,"---- Please select your State ----"),t.qZA(),t.YNc(14,v,2,2,"option",7),t.qZA()(),t.TgZ(15,"div",1)(16,"label",2),t._uU(17,"Select your City"),t.qZA(),t.TgZ(18,"select",8)(19,"option",4),t._uU(20,"---- Please select your City ----"),t.qZA(),t.YNc(21,C,2,1,"option",9),t.qZA()(),t.TgZ(22,"div",1)(23,"label",10),t._uU(24,"Street Address 1"),t.qZA(),t._UZ(25,"input",11),t.qZA(),t.TgZ(26,"div",1)(27,"label",12),t._uU(28,"Street Address 2"),t.qZA(),t._UZ(29,"input",13),t.qZA(),t.TgZ(30,"div",14),t._UZ(31,"div",15),t.TgZ(32,"div",15)(33,"div",16)(34,"button",17),t.NdJ("click",function(){return r.navigteToPayment()}),t._uU(35," Next step "),t.qZA()()()()()),2&e&&(t.Q6J("formGroup",r.formDirection),t.xp6(7),t.Q6J("ngForOf",r.countries),t.xp6(7),t.Q6J("ngForOf",r.states),t.xp6(7),t.Q6J("ngForOf",r.cities))},dependencies:[l.sg,u.rH,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.sg,i.u]}),o})();const F=[{path:"",component:(()=>{class o{constructor(e,r,c){this.directionService=e,this.fb=r,this.userDirectionService=c}get countries(){return this.directionService.countries}changeUserDirection(e){this.userDirectionService.setUserDirection(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p),t.Y36(i.qu),t.Y36(g.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-direction"]],decls:2,vars:1,consts:[[1,"container","mt-5"],[3,"countries","onFormCompleted"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"app-form-direction",1),t.NdJ("onFormCompleted",function(Z){return r.changeUserDirection(Z)}),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("countries",r.countries))},dependencies:[y]}),o})()}];let b=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(F),u.Bz]}),o})(),D=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.ez,b,i.u5,i.UX]}),o})()}}]);